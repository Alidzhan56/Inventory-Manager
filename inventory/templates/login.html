      
<!DOCTYPE html>
<html lang="{{ g.lang or 'en' }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ _('Login') }} · WarePulse</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#0f1a33;
      --card:#0f172a;
      --card2:#0b1220;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --primary:#3b82f6;
      --primary2:#2563eb;
      --ring: rgba(59,130,246,.35);
      --border: rgba(148,163,184,.18);
      --shadow: 0 24px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }

    body{
      min-height:100vh;
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 15% 20%, rgba(59,130,246,.26), transparent 60%),
        radial-gradient(900px 500px at 85% 70%, rgba(16,185,129,.18), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* subtle grid */
    body:before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(148,163,184,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(148,163,184,.06) 1px, transparent 1px);
      background-size: 52px 52px;
      mask-image: radial-gradient(600px 400px at 50% 30%, black 40%, transparent 75%);
      opacity:.8;
    }

    .page{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px 16px;
      position:relative;
    }

    .shell{
      width: min(1050px, 100%);
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      border:1px solid var(--border);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      background: rgba(15,23,42,.55);
      backdrop-filter: blur(10px);
      transform: translateY(10px);
      opacity:0;
      animation: enter .7s ease forwards;
    }

    @keyframes enter{
      to { transform: translateY(0); opacity:1; }
    }

    @media (max-width: 992px){
      .shell{ grid-template-columns: 1fr; }
      .left{ display:none; }
    }

    .left{
      padding: 42px 44px;
      background:
        radial-gradient(900px 420px at 20% 20%, rgba(59,130,246,.35), transparent 60%),
        radial-gradient(800px 420px at 80% 75%, rgba(16,185,129,.22), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
      border-right:1px solid var(--border);
      position:relative;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom: 26px;
    }
    .brand img{
      width:42px;height:42px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      object-fit:cover;
    }
    .brand .title{
      line-height:1.1;
      font-weight:800;
      letter-spacing:-0.02em;
    }
    .brand .sub{
      color: rgba(229,231,235,.75);
      font-size:.92rem;
    }

    .headline{
      font-size: 2.15rem;
      font-weight: 850;
      letter-spacing:-0.03em;
      line-height:1.05;
      margin: 10px 0 14px;
    }
    .desc{
      color: rgba(229,231,235,.78);
      font-size: 1.02rem;
      max-width: 42ch;
    }

    .bullets{
      margin-top: 26px;
      display:grid;
      gap:12px;
    }
    .bullet{
      display:flex;
      gap:12px;
      padding: 12px 14px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(15,23,42,.35);
    }
    .bullet i{
      color:#a7f3d0;
      font-size: 1.1rem;
      margin-top: 2px;
    }
    .bullet .b-title{
      font-weight: 700;
      margin-bottom:2px;
    }
    .bullet .b-sub{
      color: rgba(229,231,235,.72);
      font-size:.92rem;
    }

    .right{
      padding: 38px 34px;
      background: linear-gradient(180deg, rgba(15,23,42,.65), rgba(2,6,23,.65));
    }

    .cardish{
      border:1px solid rgba(148,163,184,.18);
      border-radius: 18px;
      background: rgba(2,6,23,.35);
      padding: 22px;
    }

    .form-title{
      font-weight: 800;
      letter-spacing:-0.02em;
      font-size: 1.25rem;
      margin-bottom:6px;
    }
    .form-sub{
      color: var(--muted);
      font-size: .95rem;
      margin-bottom: 18px;
    }

    .form-label{
      color: rgba(229,231,235,.85);
      font-weight: 600;
      font-size: .9rem;
    }

    .form-control{
      background: rgba(15,23,42,.55);
      border: 1px solid rgba(148,163,184,.22);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 12px;
    }
    .form-control::placeholder{ color: rgba(148,163,184,.75); }
    .form-control:focus{
      background: rgba(15,23,42,.70);
      border-color: rgba(59,130,246,.55);
      box-shadow: 0 0 0 .25rem var(--ring);
      color: var(--text);
    }

    .input-group-text{
      background: transparent;
      border: 0;
      color: rgba(229,231,235,.85);
      cursor: pointer;
      padding-right: 10px;
    }

    .btn-primary{
      background: linear-gradient(135deg, var(--primary), var(--primary2));
      border: 0;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 750;
      letter-spacing: .1px;
      box-shadow: 0 12px 28px rgba(37,99,235,.28);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn-primary:hover{ filter: brightness(1.05); transform: translateY(-1px); }
    .btn-primary:active{ transform: translateY(0); }

    .small-link{
      color: rgba(229,231,235,.75);
      text-decoration: none;
      font-weight: 650;
    }
    .small-link:hover{ color:#fff; text-decoration: underline; }

    .alert{
      border-radius: 14px;
      border: 0;
      box-shadow: 0 10px 20px rgba(0,0,0,.2);
    }

    /* shake on error */
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-8px); }
      80% { transform: translateX(8px); }
      100% { transform: translateX(0); }
    }
    .shake { animation: shake .42s ease; }

    .divider{
      display:flex;
      align-items:center;
      gap:12px;
      margin: 16px 0;
      color: rgba(148,163,184,.75);
      font-size:.85rem;
    }
    .divider:before,.divider:after{
      content:"";
      flex:1;
      height:1px;
      background: rgba(148,163,184,.18);
    }

    .footer-note{
      margin-top: 14px;
      color: rgba(148,163,184,.75);
      font-size: .85rem;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="shell" id="shell">

      <!-- LEFT (marketing) -->
      <aside class="left">
        <div class="brand">
          <img src="{{ url_for('static', filename='warepulse-logo.png') }}" alt="WarePulse" />
          <div>
            <div class="title">WarePulse</div>
            <div class="sub">{{ g.app_config.company_name if g.app_config else 'Inventory' }}</div>
          </div>
        </div>

        <div class="headline">{{ _('Run inventory like a modern business.') }}</div>
        <div class="desc">
          {{ _('Track stock, record sales and purchases, and keep every warehouse in sync — without spreadsheets.') }}
        </div>

        <div class="bullets">
          <div class="bullet">
            <i class="bi bi-check2-circle"></i>
            <div>
              <div class="b-title">{{ _('Warehouse stock') }}</div>
              <div class="b-sub">{{ _('See quantities per warehouse and move fast.') }}</div>
            </div>
          </div>
          <div class="bullet">
            <i class="bi bi-check2-circle"></i>
            <div>
              <div class="b-title">{{ _('FIFO costing') }}</div>
              <div class="b-sub">{{ _('Accurate cost & profit on every sale.') }}</div>
            </div>
          </div>
          <div class="bullet">
            <i class="bi bi-check2-circle"></i>
            <div>
              <div class="b-title">{{ _('Roles & control') }}</div>
              <div class="b-sub">{{ _('Give access safely to managers and agents.') }}</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- RIGHT (form) -->
      <section class="right">
        <div class="cardish" id="loginCard">
          <div class="form-title">
            <i class="bi bi-box-arrow-in-right me-2"></i>{{ _('Sign in') }}
          </div>
          <div class="form-sub">
            {{ _('Use your email or username to access your dashboard.') }}
          </div>

          <!-- Flash messages -->
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, msg in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show mb-3" role="alert">
                  {{ msg }}
                  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
              {% endfor %}
            {% endif %}
          {% endwith %}

          <form id="loginForm" action="{{ url_for('auth.login') }}" method="POST" novalidate>
            <div class="mb-3">
              <label class="form-label">{{ _('Email or Username') }}</label>
              <input type="text" name="identifier" class="form-control" placeholder="{{ _('Enter email or username') }}" required autofocus>
            </div>

            <div class="mb-3">
              <label class="form-label">{{ _('Password') }}</label>
              <div class="input-group align-items-center">
                <input type="password" name="password" id="password" class="form-control" placeholder="••••••••" required>
                <span class="input-group-text" id="togglePassword" title="{{ _('Show/Hide') }}">
                  <i class="bi bi-eye-slash" id="eyeIcon"></i>
                </span>
              </div>
            </div>

            <div class="d-grid mt-4">
              <button type="submit" class="btn btn-primary btn-lg">
                {{ _('Login') }}
              </button>
            </div>

            <div class="divider">{{ _('or') }}</div>

            <div class="d-grid">
              <a href="{{ url_for('auth.register_admin') }}" class="btn btn-outline-light btn-lg" style="border-radius:14px;">
                <i class="bi bi-person-plus me-2"></i>{{ _('Create Owner Account') }}
              </a>
            </div>

            <div class="footer-note">
              {{ _('By continuing, you agree to your company’s policies.') }}
            </div>
          </form>
        </div>
      </section>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const passwordInput = document.getElementById('password');
      const togglePassword = document.getElementById('togglePassword');
      const eyeIcon = document.getElementById('eyeIcon');
      const loginCard = document.getElementById('loginCard');

      togglePassword.addEventListener('click', function () {
        const type = passwordInput.type === 'password' ? 'text' : 'password';
        passwordInput.type = type;
        eyeIcon.classList.toggle('bi-eye');
        eyeIcon.classList.toggle('bi-eye-slash');
      });

      // Shake on server error flash
      const dangerAlert = document.querySelector('.alert-danger');
      if (dangerAlert) {
        loginCard.classList.add('shake');
        setTimeout(() => loginCard.classList.remove('shake'), 520);
      }
    });
  </script>
</body>
</html>
 